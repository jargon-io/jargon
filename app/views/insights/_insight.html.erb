<%# locals: (insight:, article: nil) %>

<div id="<%= dom_id(insight) %>" class="border rounded-lg p-5 transition-colors <%= insight.failed? ? 'border-red-200 bg-red-50' : 'border-gray-200 hover:border-gray-300' %>">
  <h2 class="text-xl font-semibold mb-2">
    <%= link_to insight.title || "Untitled", insight, class: "hover:text-blue-600" %>
  </h2>

  <% if insight.body.present? %>
    <p class="text-gray-700 mt-2"><%= insight.body %></p>
  <% end %>

  <% if insight.snippet.present? %>
    <div class="text-base pl-4 mt-4 border-l-4 border-blue-300 text-gray-700 italic">
      <%= truncate(insight.snippet, length: 500) %>
      <% unless article.present? && article == insight.article %>
        <div class="mt-4 text-base leading-tight">
          <%= link_to insight.article.title, insight.article, class: "text-blue-500 hover:text-blue-600 not-italic" %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

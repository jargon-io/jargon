<%# locals: (insight:, expanded: true) %>
<div id="<%= dom_id(insight) %>" class="py-2">
  <h2 class="font-medium">
    <%= link_to insight.title, insight, class: "text-blue-600 hover:text-blue-800" %>
  </h2>

  <% if expanded %>
    <% if insight.body.present? %>
      <p class="text-gray-700 mt-2"><%= insight.body %></p>
    <% end %>

    <% if insight.snippet.present? %>
      <blockquote class="mt-3 pl-4 border-l-2 border-gray-300 text-gray-500 italic text-sm">
        <%= insight.snippet %>
      </blockquote>
    <% end %>

    <% if insight.research_threads.any? %>
      <div class="mt-3">
        <ul class="space-y-1">
          <% insight.research_threads.each do |thread| %>
            <li class="text-sm text-gray-600 hover:text-blue-600 cursor-pointer">
              â†’ <%= thread.query %>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  <% end %>
</div>

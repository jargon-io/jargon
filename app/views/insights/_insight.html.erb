<%# locals: (insight:, article: nil) %>

<div id="<%= dom_id(insight) %>" class="border rounded-lg p-5 transition-colors <%= insight.failed? ? 'border-red-200 bg-red-50' : 'border-gray-200 hover:border-gray-300' %>">
  <h2 class="text-xl font-semibold mb-2">
    <%= link_to insight.title || "Untitled", insight, class: "hover:text-blue-600" %>
  </h2>

  <% if insight.body.present? %>
    <p class="text-gray-700 mt-2"><%= safe_html(insight.body) %></p>
  <% end %>

  <%= render "shared/snippet",
             text: insight.snippet,
             source: (article.present? && article == insight.article ? nil : insight.article),
             compact: true %>
</div>
